<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CampusEvent API Documentation</title>
    <link rel="stylesheet" type="text/css" href="https://unpkg.com/swagger-ui-dist@5.10.5/swagger-ui.css">
    <style>
        html {
            box-sizing: border-box;
            overflow: -moz-scrollbars-vertical;
            overflow-y: scroll;
        }

        *,
        *:before,
        *:after {
            box-sizing: inherit;
        }

        body {
            margin: 0;
            padding: 0;
        }

        .topbar {
            background-color: #667eea !important;
        }

        .swagger-ui .topbar .download-url-wrapper .select-label {
            color: #fff;
        }

        .swagger-ui .info .title {
            font-size: 36px;
            color: #667eea;
        }
    </style>
</head>

<body>
    <div id="swagger-ui"></div>

    <script src="https://unpkg.com/swagger-ui-dist@5.10.5/swagger-ui-bundle.js"></script>
    <script src="https://unpkg.com/swagger-ui-dist@5.10.5/swagger-ui-standalone-preset.js"></script>
    <script>
        window.onload = function() {
            const spec = {
                "openapi": "3.0.0",
                "info": {
                    "title": "CampusEvent API",
                    "version": "1.0.0",
                    "description": "API untuk mengelola event kampus dengan integrasi weather dan geocoding",
                    "contact": {
                        "name": "API Support",
                        "email": "support@campusevent.com"
                    }
                },
                "servers": [
                    {
                        "url": "http://localhost:3333",
                        "description": "Local Development"
                    }
                ],
                "components": {
                    "securitySchemes": {
                        "bearerAuth": {
                            "type": "http",
                            "scheme": "bearer",
                            "bearerFormat": "JWT",
                            "description": "JWT Authorization header menggunakan Bearer scheme"
                        },
                        "apiKey": {
                            "type": "apiKey",
                            "in": "header",
                            "name": "x-api-key",
                            "description": "API Key untuk operasi tertentu (delete event)"
                        }
                    }
                },
                "paths": {
                    "/": {
                        "get": {
                            "tags": ["Basic"],
                            "summary": "API Welcome",
                            "description": "Endpoint dasar untuk mengecek API berjalan",
                            "responses": {
                                "200": {
                                    "description": "Welcome message",
                                    "content": {
                                        "application/json": {
                                            "schema": {
                                                "type": "object",
                                                "properties": {
                                                    "message": {
                                                        "type": "string",
                                                        "example": "CampusEvent API"
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "/auth/register": {
                        "post": {
                            "tags": ["Authentication"],
                            "summary": "Registrasi pengguna baru",
                            "description": "Mendaftarkan user baru dan mendapatkan token JWT serta API Key",
                            "requestBody": {
                                "required": true,
                                "content": {
                                    "application/json": {
                                        "schema": {
                                            "type": "object",
                                            "required": ["name", "email", "password"],
                                            "properties": {
                                                "name": {
                                                    "type": "string",
                                                    "example": "John Doe"
                                                },
                                                "email": {
                                                    "type": "string",
                                                    "format": "email",
                                                    "example": "john@example.com"
                                                },
                                                "password": {
                                                    "type": "string",
                                                    "format": "password",
                                                    "example": "password123"
                                                }
                                            }
                                        }
                                    }
                                }
                            },
                            "responses": {
                                "201": {
                                    "description": "User berhasil terdaftar",
                                    "content": {
                                        "application/json": {
                                            "schema": {
                                                "type": "object",
                                                "properties": {
                                                    "message": {
                                                        "type": "string",
                                                        "example": "User registered successfully"
                                                    },
                                                    "token": {
                                                        "type": "string",
                                                        "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                                                    },
                                                    "apiKey": {
                                                        "type": "string",
                                                        "example": "1a2b3c4d5e6f7g8h9i0j"
                                                    },
                                                    "user": {
                                                        "type": "object",
                                                        "properties": {
                                                            "id": {"type": "string"},
                                                            "name": {"type": "string"},
                                                            "email": {"type": "string"}
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                },
                                "400": {
                                    "description": "Email sudah terdaftar"
                                }
                            }
                        }
                    },
                    "/auth/login": {
                        "post": {
                            "tags": ["Authentication"],
                            "summary": "Login dan mendapatkan token",
                            "description": "Login dengan email dan password, mendapatkan JWT token",
                            "requestBody": {
                                "required": true,
                                "content": {
                                    "application/json": {
                                        "schema": {
                                            "type": "object",
                                            "required": ["email", "password"],
                                            "properties": {
                                                "email": {
                                                    "type": "string",
                                                    "format": "email",
                                                    "example": "john@example.com"
                                                },
                                                "password": {
                                                    "type": "string",
                                                    "format": "password",
                                                    "example": "password123"
                                                }
                                            }
                                        }
                                    }
                                }
                            },
                            "responses": {
                                "200": {
                                    "description": "Login berhasil",
                                    "content": {
                                        "application/json": {
                                            "schema": {
                                                "type": "object",
                                                "properties": {
                                                    "message": {
                                                        "type": "string",
                                                        "example": "Login successful"
                                                    },
                                                    "token": {
                                                        "type": "string",
                                                        "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                                                    },
                                                    "user": {
                                                        "type": "object"
                                                    }
                                                }
                                            }
                                        }
                                    }
                                },
                                "401": {
                                    "description": "Email atau password salah"
                                }
                            }
                        }
                    },
                    "/events": {
                        "get": {
                            "tags": ["Events"],
                            "summary": "Ambil daftar semua event",
                            "description": "Mendapatkan list semua event yang tersedia",
                            "security": [{"bearerAuth": []}],
                            "responses": {
                                "200": {
                                    "description": "List event berhasil didapatkan",
                                    "content": {
                                        "application/json": {
                                            "schema": {
                                                "type": "array",
                                                "items": {
                                                    "type": "object",
                                                    "properties": {
                                                        "id": {"type": "string"},
                                                        "title": {"type": "string"},
                                                        "description": {"type": "string"},
                                                        "date": {"type": "string"},
                                                        "location": {"type": "string"},
                                                        "latitude": {"type": "number"},
                                                        "longitude": {"type": "number"}
                                                    }
                                                }
                                            }
                                        }
                                    }
                                },
                                "401": {
                                    "description": "Unauthorized - Token tidak valid"
                                }
                            }
                        },
                        "post": {
                            "tags": ["Events"],
                            "summary": "Buat event baru",
                            "description": "Membuat event baru dengan integrasi geocoding otomatis",
                            "security": [{"bearerAuth": []}],
                            "requestBody": {
                                "required": true,
                                "content": {
                                    "application/json": {
                                        "schema": {
                                            "type": "object",
                                            "required": ["title", "date", "location"],
                                            "properties": {
                                                "title": {
                                                    "type": "string",
                                                    "example": "Workshop React"
                                                },
                                                "description": {
                                                    "type": "string",
                                                    "example": "Belajar React dari dasar"
                                                },
                                                "date": {
                                                    "type": "string",
                                                    "format": "date",
                                                    "example": "2025-12-15"
                                                },
                                                "location": {
                                                    "type": "string",
                                                    "example": "Jakarta"
                                                }
                                            }
                                        }
                                    }
                                }
                            },
                            "responses": {
                                "201": {
                                    "description": "Event berhasil dibuat"
                                },
                                "401": {
                                    "description": "Unauthorized"
                                }
                            }
                        }
                    },
                    "/events/{id}": {
                        "get": {
                            "tags": ["Events"],
                            "summary": "Ambil detail event",
                            "description": "Mendapatkan detail event berdasarkan ID",
                            "security": [{"bearerAuth": []}],
                            "parameters": [
                                {
                                    "name": "id",
                                    "in": "path",
                                    "required": true,
                                    "schema": {
                                        "type": "string"
                                    },
                                    "description": "ID event"
                                }
                            ],
                            "responses": {
                                "200": {
                                    "description": "Detail event"
                                },
                                "404": {
                                    "description": "Event tidak ditemukan"
                                }
                            }
                        },
                        "put": {
                            "tags": ["Events"],
                            "summary": "Update event",
                            "description": "Mengupdate data event yang sudah ada",
                            "security": [{"bearerAuth": []}],
                            "parameters": [
                                {
                                    "name": "id",
                                    "in": "path",
                                    "required": true,
                                    "schema": {
                                        "type": "string"
                                    }
                                }
                            ],
                            "requestBody": {
                                "required": true,
                                "content": {
                                    "application/json": {
                                        "schema": {
                                            "type": "object",
                                            "properties": {
                                                "title": {"type": "string"},
                                                "description": {"type": "string"},
                                                "date": {"type": "string"},
                                                "location": {"type": "string"}
                                            }
                                        }
                                    }
                                }
                            },
                            "responses": {
                                "200": {
                                    "description": "Event berhasil diupdate"
                                },
                                "404": {
                                    "description": "Event tidak ditemukan"
                                }
                            }
                        },
                        "delete": {
                            "tags": ["Events"],
                            "summary": "Hapus event",
                            "description": "Menghapus event (memerlukan JWT dan API Key)",
                            "security": [
                                {"bearerAuth": []},
                                {"apiKey": []}
                            ],
                            "parameters": [
                                {
                                    "name": "id",
                                    "in": "path",
                                    "required": true,
                                    "schema": {
                                        "type": "string"
                                    }
                                }
                            ],
                            "responses": {
                                "200": {
                                    "description": "Event berhasil dihapus"
                                },
                                "403": {
                                    "description": "API Key tidak valid"
                                },
                                "404": {
                                    "description": "Event tidak ditemukan"
                                }
                            }
                        }
                    },
                    "/events/{id}/weather": {
                        "get": {
                            "tags": ["Events"],
                            "summary": "Ambil info cuaca event",
                            "description": "Mendapatkan informasi cuaca untuk lokasi event",
                            "security": [{"bearerAuth": []}],
                            "parameters": [
                                {
                                    "name": "id",
                                    "in": "path",
                                    "required": true,
                                    "schema": {
                                        "type": "string"
                                    }
                                }
                            ],
                            "responses": {
                                "200": {
                                    "description": "Info cuaca berhasil didapatkan",
                                    "content": {
                                        "application/json": {
                                            "schema": {
                                                "type": "object",
                                                "properties": {
                                                    "temperature": {"type": "number"},
                                                    "description": {"type": "string"},
                                                    "humidity": {"type": "number"},
                                                    "windSpeed": {"type": "number"}
                                                }
                                            }
                                        }
                                    }
                                },
                                "400": {
                                    "description": "Event tidak memiliki koordinat"
                                }
                            }
                        }
                    }
                },
                "tags": [
                    {
                        "name": "Basic",
                        "description": "Endpoint dasar"
                    },
                    {
                        "name": "Authentication",
                        "description": "Registrasi dan Login User"
                    },
                    {
                        "name": "Events",
                        "description": "CRUD Event Kampus"
                    }
                ]
            };

            window.ui = SwaggerUIBundle({
                spec: spec,
                dom_id: '#swagger-ui',
                deepLinking: true,
                presets: [
                    SwaggerUIBundle.presets.apis,
                    SwaggerUIStandalonePreset
                ],
                plugins: [
                    SwaggerUIBundle.plugins.DownloadUrl
                ],
                layout: "StandaloneLayout"
            });
        };
    </script>
</body>
</html>
